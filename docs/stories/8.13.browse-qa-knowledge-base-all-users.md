# Story 8.13: Browse Q&A Knowledge Base (All Users)

**Epic:** 8 - Entity Management & Q&A  
**Story Number:** 8.13  
**Created:** 2025-10-04

---

## Status

**Pending** ‚è≥

---

## Story

**As a** User (External or Internal),  
**I want to** browse published Q&A pairs,  
**So that** I can find answers to my questions.

---

## Acceptance Criteria

1. All users can access "FAQ" or "Q&A Knowledge Base" section
2. User sees list of published Q&A pairs with: Question title, Category, Publication date, Rating (average)
3. User can view Q&A organized by categories
4. User can see most popular/highest-rated Q&A
5. User can see recently added Q&A
6. User can click Q&A to view full question and answer
7. Q&A detail page displays: Full question, Full answer (with formatting), Category, Tags, Publication date, Average rating
8. User can rate the answer (Story 8.14)
9. User can navigate back to Q&A list
10. If user doesn't find answer, prominent "Ask a Question" link is available

---

## Tasks / Subtasks

### Backend Tasks

- [ ] **Task 1: Create GetPublishedQuestionsQuery** (AC: 1, 2, 3, 4, 5)
  - [ ] Create `GetPublishedQuestionsQuery.cs` in `Application/UknfPlatform.Application.Communication/QA/Queries/`
  - [ ] Query parameters:
    - CategoryFilter (string?, optional)
    - SortBy (enum: Recent, Popular, HighRated)
    - PageNumber, PageSize
  - [ ] Create `GetPublishedQuestionsQueryHandler.cs`
  - [ ] Filter: Status = Published only
  - [ ] Implement sorting:
    - Recent: Order by PublishedDate desc
    - Popular: Order by ViewCount desc
    - HighRated: Order by (RatingSum/RatingCount) desc
  - [ ] Return PagedResult<PublishedQuestionDto>

- [ ] **Task 2: Create GetPublishedQuestionByIdQuery** (AC: 6, 7)
  - [ ] Create `GetPublishedQuestionByIdQuery.cs`
  - [ ] Query parameters: QuestionId
  - [ ] Increment ViewCount when accessed
  - [ ] Return PublishedQuestionDetailDto with all fields
  - [ ] Calculate average rating: RatingSum / RatingCount

- [ ] **Task 3: Create PublishedQuestionDto** (AC: 2)
  - [ ] Create `PublishedQuestionDto.cs`
  - [ ] Properties:
    - Id (Guid)
    - Title (string)
    - Category (string)
    - PublicationDate (DateTime)
    - AverageRating (double)
    - ViewCount (int)

- [ ] **Task 4: Create PublishedQuestionDetailDto** (AC: 7)
  - [ ] Create `PublishedQuestionDetailDto.cs`
  - [ ] Properties:
    - Id, Title, Content, Answer, Category, Tags, PublicationDate, AverageRating, RatingCount, ViewCount

- [ ] **Task 5: Create REST API endpoints** (AC: 1, 6)
  - [ ] GET /api/qa/faq (list published Q&A)
  - [ ] GET /api/qa/faq/{id} (Q&A detail)
  - [ ] No authentication required (public access)
  - [ ] Query parameters: category, sortBy, page, pageSize
  - [ ] Return 200 with paginated results
  - [ ] Return 404 if question not found or not published
  - [ ] Add Swagger documentation

### Frontend Tasks

- [ ] **Task 6: Create faq-list component** (AC: 1, 2, 3, 4, 5)
  - [ ] Create `src/Frontend/uknf-platform-ui/src/app/features/qa/faq-list/faq-list.component.ts`
  - [ ] Configure routing: `/faq` (public, no auth required)
  - [ ] Display Q&A list
  - [ ] Show: Title, Category badge, Publication date, Average rating (stars)
  - [ ] Click item to navigate to detail

- [ ] **Task 7: Implement category filter** (AC: 3)
  - [ ] Category tabs or sidebar
  - [ ] Show Q&A count per category
  - [ ] "All" category shows all Q&A
  - [ ] Update list on category selection

- [ ] **Task 8: Implement sort options** (AC: 4, 5)
  - [ ] Dropdown or tabs: "Recent", "Most Popular", "Highest Rated"
  - [ ] Update list on sort change
  - [ ] Default: Recent

- [ ] **Task 9: Create faq-detail component** (AC: 6, 7, 8, 9)
  - [ ] Create `src/Frontend/uknf-platform-ui/src/app/features/qa/faq-detail/faq-detail.component.ts`
  - [ ] Configure routing: `/faq/:id`
  - [ ] Display full question and answer
  - [ ] Render HTML answer with formatting
  - [ ] Show category, tags, publication date
  - [ ] Display average rating with star icons
  - [ ] Add rating component (Story 8.14)
  - [ ] "Back to FAQ" button

- [ ] **Task 10: Add "Ask a Question" CTA** (AC: 10)
  - [ ] Prominent button on FAQ list page
  - [ ] Message: "Didn't find what you're looking for?"
  - [ ] Navigate to `/qa/ask` (Story 8.9)
  - [ ] Show at top and bottom of FAQ list

- [ ] **Task 11: Style FAQ pages** (AC: All)
  - [ ] Clean, readable layout
  - [ ] Category badges with colors
  - [ ] Star rating display
  - [ ] Formatted answer with proper HTML rendering
  - [ ] Responsive design
  - [ ] Tailwind CSS styling

### Testing Tasks

- [ ] **Task 12: Write unit tests**
  - [ ] Test: GetPublishedQuestionsQuery returns only published Q&A
  - [ ] Test: Sorting works (Recent, Popular, HighRated)
  - [ ] Test: Category filtering works
  - [ ] Test: ViewCount increments on detail view

- [ ] **Task 13: Write integration tests**
  - [ ] Test: GET /api/qa/faq returns published Q&A only
  - [ ] Test: Unpublished Q&A are not visible
  - [ ] Test: Sort and filter parameters work
  - [ ] Test: GET /api/qa/faq/:id returns Q&A detail

---

## Dev Notes

### Public Access

- FAQ section is accessible without authentication
- All users (guests, external, internal) can browse
- Only published Q&A are visible

### Layout Suggestions

**FAQ List:**
- Card layout with Q&A items
- Each card shows: Title (large), Category badge, Rating stars, Publication date
- Hover effect for better UX
- Pagination at bottom

**FAQ Detail:**
- Question section: Title (large), Content, Category, Tags
- Answer section: Rich text with formatting
- Metadata: Publication date, Views, Average rating
- Rating component at bottom
- Related Q&A suggestions (future enhancement)

### Categories

Display categories with different colors:
- **Reporting**: Blue
- **System Access**: Green
- **Technical Issues**: Red
- **General**: Gray

### Rating Display

- Show average rating as stars (1-5)
- Show number of ratings: "(25 ratings)"
- Empty state: "Not yet rated"

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-04 | 1.0 | Story created from Epic 8 | Scrum Master (AI) |

---

## Dev Agent Record

_This section will be populated by the development agent during implementation._

---

## QA Results

_This section will be populated by QA agent after story completion._

